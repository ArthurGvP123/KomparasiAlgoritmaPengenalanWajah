##### 0 - PERSIAPAN VIRTUAL ENVIRONMENT #####

py -3.10 -m venv .venv
.venv\Scripts\Activate.ps1
deactivate
python -m pip install --upgrade pip wheel setuptools
pip install -r requirements.txt

---

##### 1 - PERINTAH PROGRAM 01 UNTUK MEMOTONG DAN MERAPIKAN DATASET #####

python 01_merapikan_dataset.py --dataset-name Dosen --size 112 --sort on --probe-per-id 2

python 01_merapikan_dataset.py --dataset-name Dosen --size 112 --sort on --probe-per-id 0

python 01_merapikan_dataset.py --dataset-name Dosen --size 112 --sort off

Note:
a. default ukuran fungsi norm_crop adalah 112 dan 224, jika ingin diluar dari itu maka akan dipilih ukuran terdekat kemudian dilakukan resize
b. --sort on untuk mensortir foto dataset menjadi folder gallery dan probe
c. --sort off membuat program tidak melakukan sortir, melainkan hanya direktori murni dataset saja
d. --probe-per-id untuk menentukan banyaknya foto yang tersimpan dalam folder probe

---

##### 2 - PERINTAH PROGRAM 02 UNTUK EMBEDDING ALGORITMA #####

python .\02_embed_adaface.py `
  --root ".\dataset\Dosen_112\gallery" `
  --weights ".\weights\CurricularFace_Backbone.pth" `
  --magface-repo "D:\KEVIN SUKA SAMBEL\1-CurricularFace" `
  --arch ir100 `
  --out ".\embeds_curricularface_ir101.npz" `
  --batch 128

---

##### 3a - PERINTAH PROGRAM 03 COSINE UNTUK SEMUA ALGORITMA YANG TERSEDIA DALAM FOLDER EMBEDS #####

Get-ChildItem .\embeds\*.npz | ForEach-Object {
  python 03_evaluasi_performa_cosine.py --embeds $_.FullName --outdir eval_verif_cosine --fixed-thr 0.3
}

Get-ChildItem .\embeds\*.npz | ForEach-Object {
  python 03_evaluasi_performa_cosine.py --embeds $_.FullName --outdir eval_verif_cosine --fixed-thr 0.5
}

Get-ChildItem .\embeds\*.npz | ForEach-Object {
  python 03_evaluasi_performa_cosine.py --embeds $_.FullName --outdir eval_verif_cosine --fixed-thr 0.7
}

Note: Ubah nilai threshold yang ingin digunakan dalam pengujian

---

##### 3b - PERINTAH PROGRAM 03 COSINE UNTUK SALAH SATU ALGORITMA #####

python 03A_evaluasi_performa_cosine.py --embeds .\embeds\embeds_adaface_ir100.npz --outdir eval_verif_cosine --fixed-thr 0.3

Note: Ubah nama file embeds dan nilai threshold yang ingin digunakan dalam pengujian

---

##### 3c - PERINTAH PROGRAM 03 EUCLIDEAN UNTUK SEMUA ALGORITMA YANG TERSEDIA DALAM FOLDER EMBEDS #####

Get-ChildItem .\embeds\*.npz | ForEach-Object {
  python 03_evaluasi_performa_euclidean.py --embeds $_.FullName --outdir eval_verif_euclidean --fixed-thr 0.3
}

Get-ChildItem .\embeds\*.npz | ForEach-Object {
  python 03_evaluasi_performa_euclidean.py --embeds $_.FullName --outdir eval_verif_euclidean --fixed-thr 0.5
}

Get-ChildItem .\embeds\*.npz | ForEach-Object {
  python 03_evaluasi_performa_euclidean.py --embeds $_.FullName --outdir eval_verif_euclidean --fixed-thr 0.7
}

Note: Ubah nilai threshold yang ingin digunakan dalam pengujian

---

##### 3d - PERINTAH PROGRAM 03 EUCLIDEAN UNTUK SALAH SATU ALGORITMA #####

python 03_evaluasi_performa_euclidean.py --embeds .\embeds\embeds_adaface_ir100.npz --outdir eval_verif_cosine --fixed-thr 0.3

Note: Ubah nama file embeds dan nilai threshold yang ingin digunakan dalam pengujian

---

##### 4 - PERINTAH PROGRAM 04 UNTUK MENARIK KESIMPULAN ######

python 04_kesimpulan_evaluasi.py `
  --cosine-csv eval_verif_cosine/metrics_all_cosine.csv `
  --euclidean-csv eval_verif_euclidean/metrics_all_euclidean.csv `
  --out kesimpulan_evaluasi.csv

Note: Sesuaikan nama dan direktori file perhitungan metrik

---

##### 5 #####

python 05_pengenalan_realtime.py `
  --npz embeds/embeds_adaface_ir100.npz `
  --algo adaface `
  --sim cosine `
  --threshold 0.5 `
  --camera 0 `
  --show_score

python 05_pengenalan_realtime.py `
  --embeds_path embeds/embeds_adaface_ir100.npz `
  --repo_dir algoritma/AdaFace `
  --arch ir_101 `
  --ckpt_path algoritma/weights/adaface_ir101_ms1mv2.ckpt `
  --similarity cosine `
  --threshold 0.5

python 05_pengenalan_realtime.py `
  --embeds_path embeds/embeds_adaface_ir100.npz `
  --repo_dir algoritma/AdaFace `
  --arch ir_101 `
  --ckpt_path algoritma/weights/adaface_ir101_ms1mv2.ckpt `
  --similarity cosine --threshold 0.5 `
  --detector dnn

python 05_pengenalan_realtime.py `
  --embeds_path embeds/embeds_adaface_ir100.npz `
  --repo_dir algoritma/AdaFace `
  --arch ir_101 `
  --ckpt_path algoritma/weights/adaface_ir101_ms1mv2.ckpt `
  --similarity cosine --threshold 0.5 `
  --detector dnn `
  --label_from parentdir `
  --collapse mean

---

##### TAMBAHAN #####

python test_read_npz.py
Note: untuk membaca isi embedding pada file npz